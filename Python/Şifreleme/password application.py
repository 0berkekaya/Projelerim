import os
import os.path
import json
import rsa

publicKey = rsa.PublicKey(17967903497535065188407553920283476327491076063716159573632431428401274341640113238340732009104164453144540201513177609246643407909528675096334714826213075049098728340701169206395110773491737223879598034384028972623922345948734377033081496410003065437908840291427676543418080630077366419367457418286999662460826725850971477090805074560204988342714964461308852776218814266169065234391029707931246828747665877129296477029623922017325772637216385489008858472899644491776549404703816288916674335165060667224532436203762667430217360178709423613658143850610552265705624435009372863678227178712164784275782393888033709708807, 65537)
privateKey = rsa.PrivateKey(17967903497535065188407553920283476327491076063716159573632431428401274341640113238340732009104164453144540201513177609246643407909528675096334714826213075049098728340701169206395110773491737223879598034384028972623922345948734377033081496410003065437908840291427676543418080630077366419367457418286999662460826725850971477090805074560204988342714964461308852776218814266169065234391029707931246828747665877129296477029623922017325772637216385489008858472899644491776549404703816288916674335165060667224532436203762667430217360178709423613658143850610552265705624435009372863678227178712164784275782393888033709708807, 65537,
                            8385588238332659472551893498417541342335505935346788176436540391978292827157247104809338682430687611027036736553123431899809806282265652326113395298450541121072580451175457548358955370523799910425887444949721686324904845708347798280876919132648027213389074708235148309458556451341171083551466842988119778742152812949033410943127259170374829117672873527641104987443068080968596205975120935726606708569634600664560211047853977243868482454606042592470769056517587707807556123453008126902456514955601638576846070620834054463241724632104154380720270365926241793401687137135787384879962296708340784638830071458168347030753, 1980321284697761609964602584091118332549379210906700915901560611174957276364685849074835295671703554964818431689195897981039209928708934833091187456527846042665731182139024232804321696677842855864769620305863571228217350876277501845886683467734187587277027083584587733479899546157192908160031883216515839352312209628357995955887, 9073226469046078323012416765194212923625807323783016892624368989621234973589876364196502324768838402719881243347396002193621253456195175385495030894612888593450107501410376993805409976749488236607113407038468693311596104902505812086891111749319240064128433553108893825745526143087112453161)


def FileFeature():
    fileName = 'password'
    fileType = 'berke'
    return str(fileName + "." + fileType)


def FileControl(fileFeature):
    return os.path.exists(fileFeature)


def AccountWrite():
    company = input("Firma Adı Giriniz : ")
    username = input("Kullanıcı Adı Giriniz : ")
    password = input("Şifre Giriniz : ")

    x = {''+company+'': {''+username+'': ''+password+''}}

    print(x)

    file = open(FileFeature(), mode='a', encoding='utf-8')

    file.write(FileEncryption(x)+"\n")

    file.close()


def AccountsRead():
    # whoAccount = str(input("Kullanıcı Adı Giriniz : "))

    file = open(FileFeature(), mode='r', encoding='utf-8')

    for x in file.readlines():
        FileDecryption(x)

    """ for x in file.readlines():
        for key, value in ast.literal_eval(x).items():
            print(value.keys()) """


def FileEncryption(message):

    return rsa.encrypt(message.encode(), publicKey)


def FileDecryption(message):

    decMessage = rsa.decrypt(bytes(message, 'utf-8'), privateKey).decode()

    print("decrypted string: ", decMessage)


if FileControl(FileFeature()):
    print("Dosya Mavcut.")

    AccountWrite()

else:
    print("Dosya Yok")

    berke = open(FileFeature(), mode='x')

    if os.path.isfile(FileFeature()) & os.access(FileFeature(), os.R_OK):
        print("Dosya Oluşturma Başarılı :)")

    else:
        print("Dosya Oluşturulamadı. Lütfen programı kapatıp açınız !")
